{"version":3,"file":"main-f80a8183.js","sources":["../../src/js/support.js","../../src/js/header.js","../../src/js/rendering-books.js","../../src/js/fetch-api.js","../../src/js/books.js","../../src/js/shopping.js","../../src/js/local-storage.js","../../src/js/popup.js","../../src/js/feature.js"],"sourcesContent":["import Swiper from 'swiper/bundle';\nimport 'swiper/css/bundle';\n\n\n\nconst swiper = new Swiper('.swiper', {\n  direction: 'vertical',\n    loop: false,\n  speed: 100,\n  slidesPerView: 6,\n  keyboard: {\n    enabled: true,\n    onlyInViewport: true,\n    },\n  mousewheel: {\n    invert: true,\n    },\n  shortSwipes: false,\n navigation: {\nnextEl: '.swiper-button-next',\nprevEl: '.swiper-button-prev',\n},\n\n});\n","// ==============================================================\n\nconst refs = {\n  body: document.querySelector('body'),\n  burger: document.querySelector('.header-btn-burgher'),\n  headerNav: document.querySelector('.header-menu'),\n  headerLink: document.querySelectorAll('.header-nav-item-modal'),\n\n  logo: document.querySelector('.header-logo'),\n  home: document.querySelector('.header-home'),\n  shopping: document.querySelector('.header-shopping'),\n  homeMobal: document.querySelector('.header-home-modal'),\n  shoppingMobal: document.querySelector('.header-shopping-modal'),\n};\n\n// ========================= Bugrer =========================\n\nfunction handleHeaderLinkClick() {\n  refs.burger.classList.toggle('active');\n  refs.headerNav.classList.toggle('active');\n  refs.body.classList.toggle('lock');\n}\n\nrefs.burger.addEventListener('click', handleHeaderLinkClick);\n\n// =========================== Home and Shopping ===========================\n\nfunction handleHomeClick() {\n  localStorage.setItem('isActive', 'home');\n}\nrefs.logo.addEventListener('click', handleHomeClick);\nrefs.home.addEventListener('click', handleHomeClick);\nrefs.homeMobal.addEventListener('click', handleHomeClick);\n\nfunction handleShoppingClick() {\n  localStorage.setItem('isActive', 'shopping');\n}\nrefs.shopping.addEventListener('click', handleShoppingClick);\nrefs.shoppingMobal.addEventListener('click', handleShoppingClick);\n\nwindow.addEventListener('DOMContentLoaded', () => {\n  const activeElement = localStorage.getItem('isActive');\n  refs.home.classList.add('active');\n  refs.homeMobal.classList.add('active');\n\n  if (activeElement === 'home') {\n    refs.home.classList.add('active');\n    refs.shopping.classList.remove('active');\n\n    refs.homeMobal.classList.add('active');\n    refs.shoppingMobal.classList.remove('active');\n  } else if (activeElement === 'shopping') {\n    refs.home.classList.remove('active');\n    refs.shopping.classList.add('active');\n\n    refs.homeMobal.classList.remove('active');\n    refs.shoppingMobal.classList.add('active');\n  }\n});\n","//Render top books\nexport const renderTop = (data, booksPerRow) => {;\n    const categoriesTop = data.map(el => {\n        const catName = el.list_name;\n        const books = renderOneBook(el.books.slice(0, booksPerRow))\n        return `<div class=\"books-category-container\">\n        <h3 class=\"books-category-title\">${catName}</h3>\n        <ul class=\"books-list\">${books}</ul>\n        <div class=\"books-btn-container\">\n          <button data-catname=\"${catName}\" type=\"button\" class=\"books-btn\">see more</button>\n        </div>\n      </div>`;\n    }).join('');\n\n    return `<div class=\"books-container\"><h2 class=\"books-title\">Best Sellers Books</h2>${categoriesTop}</div>`;\n}\n\n//Render categories\nexport const renderCategories = (data) => {\n  console.log(data)\n  const categoriesItems = data.sort((a, b) => {\n    if (a.list_name < b.list_name) {\n      return -1;\n    }\n    if (a.list_name > b.list_name) {\n      return 1;\n    }\n    return 0;\n  })\n  .map(el => {\n    return `<li class=\"categories-list\">\n      <a href=\"#\" data-catname=\"${el.list_name}\" class=\"categories-nav\">${el.list_name}</a>\n    </li>`;\n  }).join('');\n\n  return `<li class=\"categories-list\">\n  <a href=\"#\" data-catname=\"\" class=\"categories-nav active\">All categories</a>\n  </li>${categoriesItems}`;\n}\n\n//Render category books\nexport const renderCategory = (data, categoryName) => {\n    const books = renderOneBook(data)\n    const categoryHtml = `<div class=\"books-container\">\n    <h2 class=\"books-title\">${categoryName}</h2>\n    <div class=\"books-category-container\">\n      <ul class=\"books-list\">${books}</ul>\n    </div>\n  </div>`;\n\n    return categoryHtml;\n}\n\n//Render one book\nfunction renderOneBook(books) {\n    const booksRendered = books.map(el => {\n        const {_id, book_image, title, author} = el;\n        return `<li class=\"books-item\">\n        <div class=\"books-wrapper\">\n          <img\n            class=\"books-img\"\n            src=\"${book_image}\"\n            alt=\"${title}\"\n          />\n          <a href=\"#\" data-id=\"${_id}\" class=\"books-overlay\">\n            QUICK VIEW\n          </a>\n        </div>\n        <div class=\"books-info\">\n          <p class=\"books-info-title\">${title}</p>\n          <p class=\"books-info-author\">${author}</p>\n        </div>\n      </li>`;\n    }).join('');\n\n    return booksRendered;\n} ","import axios from 'axios';\nimport { renderTop, renderCategories, renderCategory } from './rendering-books';\n\nconst BASEURL = 'https://books-backend.p.goit.global';\n\n//Fatch for top books\nexport const fetchGeneral = async booksPerRow => {\n  const endpoint = '/books/top-books/';\n  const fetchUrl = BASEURL + endpoint;\n\n  try {\n    const response = await axios.get(fetchUrl);\n    return renderTop(response.data, booksPerRow);\n  } catch (error) {\n    console.log(error);\n  }\n};\n\n//Fatch for categories\nexport const fetchCategories = async () => {\n  const endpoint = '/books/category-list/';\n  const fetchUrl = BASEURL + endpoint;\n\n  try {\n    const response = await axios.get(fetchUrl);\n    return renderCategories(response.data);\n  } catch (error) {\n    console.log(error);\n  }\n};\n\n//Fatch for categories books\nexport const fetchCategory = async categoryName => {\n  const endpoint = '/books/category/';\n  const fetchUrl = BASEURL + endpoint;\n  const params = {\n    category: categoryName,\n  };\n\n  try {\n    const response = await axios.get(fetchUrl, { params });\n    return renderCategory(response.data, categoryName);\n  } catch (error) {\n    console.log(error);\n  }\n};\n\n// повертає дані однієї книги по id\nexport const fetchBookById = async id => {\n  const endpoint = `/books/${id}`;\n  const fetchUrl = BASEURL + endpoint;\n\n  try {\n    const response = await axios.get(fetchUrl);\n    return response.data;\n  } catch (error) {\n    console.log(error);\n  }\n};\n","import { fetchGeneral, fetchCategories, fetchCategory } from './fetch-api';\nimport scrollToElement  from 'scroll-to-element';\n\n\n//Containers\nconst booksContainer = document.querySelector('.books-container');\nconst catsContainer = document.querySelector('.categories-menu');\n\n\n// ==============================================================\n//Function for display books\nasync function displayTop() {\n    addingLoader();\n\n     const windowWidth = window.innerWidth;\n     const booksPerRow = booksPerRowFunc(windowWidth);\n     const renderedTop = await fetchGeneral(booksPerRow);\n\n     booksContainer.innerHTML = renderedTop;\n     wrapLastWord();\n};\n\n\n// ==============================================================\n//Function for display categories\nasync function displayCategories() {\n    const renderedCats = await fetchCategories();\n\n    catsContainer.innerHTML = renderedCats;\n};\n\n\n// ==============================================================\n//Function for display category books\nasync function displayCategory(catName) {\n    addingLoader();\n\n    const renderedCat = await fetchCategory(catName);\n\n     booksContainer.innerHTML = renderedCat;\n     wrapLastWord();\n}\n\n// ==============================================================\n//Function for wrapp last title word\nfunction wrapLastWord() {\n    const title = document.querySelector('.books-title');\n    const textContent = title.textContent.split(\" \");\n    const lastWord = textContent.pop();\n\n    const updatedContent = textContent.join(\" \") + (textContent.length > 0 ? ` <span  class=\"books-title-color\">${lastWord}</span>` : lastWord);\n\n    title.innerHTML = updatedContent;\n}\n\n\n//Fontiono for detectiong books per row\nfunction booksPerRowFunc(windowWith) {\n    let booksCount = 3;\n\n    if(windowWith >= 1440) {\n        booksCount = 5;\n    } \n    \n    if(windowWith < 768) {\n        booksCount = 1;\n    }\n\n    return booksCount;\n}\n\n\n//function for change books display\nconst windowWidthStart = window.innerWidth;\nlet ctrlBreikpoint = booksPerRowFunc(windowWidthStart);\n\nasync function changeTopDisplay() {\n    const isAllCats = document.querySelector('.categories-nav.active').dataset.catname;\n\n    if(!isAllCats) {\n        const windowWidth = window.innerWidth;\n        const booksPerRow = booksPerRowFunc(windowWidth);\n\n        if(ctrlBreikpoint !== booksPerRow) {\n            addingLoader();\n            \n            ctrlBreikpoint = booksPerRow;\n            const renderedTop = await fetchGeneral(booksPerRow);\n\n            booksContainer.innerHTML = renderedTop;\n            wrapLastWord();\n        }\n    }\n}\n\n\n\n// ==============================================================\nif(booksContainer) {\n    displayTop();\n    displayCategories();\n\n    catsContainer.addEventListener('click', e => {\n        e.preventDefault();\n    \n        const target = e.target;\n    \n        if(target.tagName === 'A') {\n            const catName = target.dataset.catname;\n    \n            catsContainer.querySelector('.active').classList.remove('active');\n            target.classList.add('active');\n            \n            scrollToElement(booksContainer, {\n                offset: -24,\n                duration: 200\n            });\n\n            if(catName) {\n                displayCategory(catName);\n            } else {\n                displayTop();\n            }\n        }\n    });\n    \n    booksContainer.addEventListener('click', e => {\n        e.preventDefault();\n    \n        const target = e.target;\n    \n        if(target.classList.contains('books-btn')) {\n            const catName = target.dataset.catname;\n    \n            catsContainer.querySelector('.active').classList.remove('active');\n            catsContainer.querySelector('[data-catname=\"'+catName+'\"]').classList.add('active');\n            \n            scrollToElement(booksContainer, {\n                offset: -24,\n                duration: 700\n            }).on('end', () => {\n                displayCategory(catName);\n            });\n        }\n    });\n\n\n    window.addEventListener(\"resize\", changeTopDisplay);\n}\n\n\n//Loader function\nfunction addingLoader() {\n    booksContainer.innerHTML = '<li class=\"loader-container\"><span class=\"loader\"></span></li>';\n}","// ==============================================================\n\n// ==============================================================\n\n// ==============================================================\n\nimport Pagination from 'tui-pagination';\nimport '../css/shopping.css';\n\nexport const pagesContainer = document.querySelector('#pagination-wrapper');\n\nfunction getVisiblePagesNumber() {\n  if (matchMedia('(min-width: 768px)').matches) {\n    return 3;\n  }\n\n  return 2;\n}\n\nconst visiblePageNumber = getVisiblePagesNumber();\n\nconst options = {\n  totalItems: 10,\n  itemsPerPage: 3,\n  visiblePages: visiblePageNumber,\n  centerAlign: false,\n  template: {\n    page: '<a href=\"#\" class=\"tui-page-btn\"><span class=\"number-text\">{{page}}</span></a>',\n    currentPage:\n      '<strong class=\"tui-page-btn tui-is-selected\">{{page}}</strong>',\n    moveButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}} custom-class-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\"></span>' +\n      '</a>',\n    disabledMoveButton:\n      '<span class=\"tui-page-btn tui-is-disabled tui-{{type}} custom-class-{{type}}\">' +\n      '<span class=\"tui-ico-{{type}}\"></span>' +\n      '</span>',\n    moreButton:\n      '<a href=\"#\" class=\"tui-page-btn tui-{{type}}-is-ellip custom-class-{{type}}\">' +\n      '<span class=\"tui-ico-ellip\">...</span>' +\n      '</a>',\n  },\n};\n\nfunction checkIsThereElementOnPage() {\n  if (pagesContainer === null) {\n    return;\n  }\n\n  const instance = new Pagination(pagesContainer, options);\n}\n\ncheckIsThereElementOnPage();\n// ==============================================================\n","import { fetchBookById } from './fetch-api';\n\nexport const saveBookToLocalStorage = async (bookId) => {\n    try {\n        const bookData = await fetchBookById(bookId);\n        \n        let shoppingList = JSON.parse(localStorage.getItem('shoppinglist')) || [];\n        \n        shoppingList.push(bookData);\n        \n        localStorage.setItem('shoppinglist', JSON.stringify(shoppingList));\n    } catch (error) {\n        console.error(error);\n    }\n};\n\n\nexport const removeBookFromLocalStorage = async (bookId) => {  \n    const shoppinglist = JSON.parse(localStorage.getItem('shoppinglist')) || [];\n    const filteredList = shoppinglist.filter(item => item._id !== bookId);\n    localStorage.setItem('shoppinglist', JSON.stringify(filteredList));\n};  \n","import { fetchBookById } from './fetch-api';\nimport { saveBookToLocalStorage } from './local-storage';\n\n// ==============================================================\n// функція спрацьовує при кліку на QUICK VIEW\n// ==============================================================\n\nsetTimeout(() => {\n  popup();\n}, 3000);\n\nexport async function popup() {\n  const booksList = document.querySelector('.books-container');\n\n  if (booksList) {\n    booksList.addEventListener('click', onBookLinkClick);\n  }\n\n  async function onBookLinkClick(event) {\n    const popupBookWrapper = document.querySelector('.popup-window');\n\n    popupBookWrapper.innerHTML = '';\n\n    if (event.target.classList.contains('books-overlay')) {\n      const bookId = event.target.dataset.id;\n      const bookData = await fetchBookById(bookId);\n\n      const markup = template(bookData);\n\n      popupBookWrapper.insertAdjacentHTML('beforeend', markup);\n\n      openModal();\n    }\n  }\n}\n\n// ==============================================================\n// логіка відкриття та закриття модалки\n// ==============================================================\n\nasync function openModal() {\n  const backdrop = document.querySelector('.popup-backdrop');\n  const closeBtn = document.querySelector('.popup-close-btn');\n\n  showModal();\n  checkLocalStorage();\n  clickOnAddToShopingListBtn();\n\n  backdrop.addEventListener('click', onBackdropClick);\n  document.addEventListener('keydown', onEscClick);\n  closeBtn.addEventListener('click', onClickCloseBtn);\n  document.addEventListener('keydown', onSpaceButtonClick);\n\n  function onSpaceButtonClick(event) {\n    if (event.keyCode === 32) {\n      event.preventDefault();\n    }\n  }\n\n  function showModal() {\n    backdrop.classList.add('is-active');\n  }\n\n  function onClickCloseBtn() {\n    hideModal();\n    closeBtn.removeEventListener('click', onClickCloseBtn);\n    document.removeEventListener('keydown', onSpaceButtonClick);\n  }\n\n  function onBackdropClick(event) {\n    if (event.target === event.currentTarget) {\n      hideModal();\n      backdrop.removeEventListener('click', onBackdropClick);\n      document.removeEventListener('keydown', onSpaceButtonClick);\n    }\n  }\n\n  function onEscClick(event) {\n    if (event.keyCode === 27) {\n      hideModal();\n      document.removeEventListener('keydown', onEscClick);\n      document.removeEventListener('keydown', onSpaceButtonClick);\n    }\n  }\n\n  function hideModal() {\n    backdrop.classList.remove('is-active');\n  }\n}\n\n// ==============================================================\n// шаблон динамічної частини модалки\n// ==============================================================\nfunction template(obj) {\n  const { _id, author, title, book_image, buy_links, description = '' } = obj;\n  const [amazon, appleBook] = buy_links;\n\n  return `\n<button class=\"popup-close-btn\">\n      <svg class=\"popup-close-btn-icon\" width=\"28\" height=\"28\">\n        <use href=\"./img/icons.svg#icon-header-close\"></use>\n      </svg>\n    </button>\n    <div class=\"popup-book\">\n      <div class=\"popup-wrap-img\">\n        <img class=\"popup-book-image\" src=\"${book_image}\" alt=\"обкладинка\" />\n      </div>\n      <div class=\"popup-book-content\">\n        <h2 class=\"popup-book-title\">${title}</h2>\n        <h3 class=\"popup-book-author\">${author}</h3>\n        <p class=\"popup-book-review\">${description}</p>\n        <ul class=\"popup-shopping-links\">\n          <li>\n            <a\n              href=\"${amazon.url}\"\n              target=\"blank\"\n              rel=\"nofollow noopener noreferrer\"\n              aria-label=\"Link to shop\"\n              class=\"amazon popup-shopping-links-icon\"\n            >\n              <img\n                class=\"popup-shopping-links-icon\"\n                src=\"./img/shopping/amazon.png\"\n                alt=\"Logo of shop\"\n                width=\"62\"\n              />\n            </a>\n          </li>\n          <li>\n            <a\n              href=\"${appleBook.url}\"\n              target=\"blank\"\n              rel=\"nofollow noopener noreferrer\"\n              aria-label=\"Link to shop\"\n              class=\"book popup-shopping-links-icon\"\n            >\n              <img\n                src=\"./img/shopping/book-apple.png\"\n                alt=\"Logo of shop\"\n                width=\"33\"\n              />\n            </a>\n          </li>\n        </ul>\n      </div>\n    </div>\n    <div class=\"popup-book-btn-add\">\n      <button\n        type=\"button\"\n        class=\"popup-book-btn-add-to-shopinglist\"\n        data-id=\"${_id}\"\n        id=\"add\"\n        aria-label=\"Add card to shopping list\"\n      ></button>\n    </div>\n\n    `;\n}\n\n// ==============================================================\n// логіка перевірки LocalStorage та відпрацювання кнопки ADD TO SHOPPING LIST\n// ==============================================================\n\nfunction checkLocalStorage() {\n  const addToShoppingListBtn = document.querySelector(\n    '.popup-book-btn-add-to-shopinglist'\n  );\n  const bookId = addToShoppingListBtn.dataset.id;\n\n  const localStorageData =\n    JSON.parse(localStorage.getItem('shoppinglist')) || [];\n\n  const bookInLocalStorage = localStorageData\n    .map(element => element._id)\n    .includes(bookId);\n\n  if (bookInLocalStorage) {\n    addToShoppingListBtn.textContent = 'REMOVE FROM THE SHOPPING LIST';\n    addToShoppingListBtn.insertAdjacentHTML('afterend', templateForBtn());\n  } else {\n    addToShoppingListBtn.textContent = 'ADD TO SHOPPING LIST';\n  }\n}\n\nfunction clickOnAddToShopingListBtn() {\n  const addToShoppingListBtn = document.querySelector(\n    '.popup-book-btn-add-to-shopinglist'\n  );\n  const bookId = addToShoppingListBtn.dataset.id;\n\n  addToShoppingListBtn.addEventListener('click', addToShoppingListBtnHandler);\n\n  function addToShoppingListBtnHandler() {\n    const localStorageData =\n      JSON.parse(localStorage.getItem('shoppinglist')) || [];\n\n    const bookInLocalStorage = localStorageData\n      .map(element => element._id)\n      .includes(bookId);\n\n    if (!bookInLocalStorage) {\n      saveBookToLocalStorage(bookId);\n      addToShoppingListBtn.textContent = 'REMOVE FROM THE SHOPPING LIST';\n      addToShoppingListBtn.insertAdjacentHTML('afterend', templateForBtn());\n    } else {\n      // Тут треба викликати функцію видалення з LocalStorage\n      document.querySelector('.under-btn-text').remove();\n      addToShoppingListBtn.textContent = 'ADD TO SHOPPING LIST';\n    }\n  }\n}\n\nfunction templateForBtn() {\n  return `\n      <p class=\"under-btn-text\">\n        Congratulations! You have added the book to the shopping list. To\n        delete, press the button \"Remove from the shopping list\".\n      </p>\n    `;\n}\n","// ==========================================================\n\nconst toggleBtn = document.querySelector('.toggle-checkbox');\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  if (localStorage.getItem('theme') === 'theme-dark') {\n    setTheme('theme-dark');\n    toggleBtn.checked = true;\n  }\n});\n\nfunction setTheme(themeName) {\n  localStorage.setItem('theme', themeName);\n  const root = document.documentElement;\n  root.setAttribute('data-theme', themeName);\n}\n\nexport const toggle = toggleBtn.addEventListener('click', () => {\n  if (localStorage.getItem('theme') === 'theme-dark') {\n    setTheme('theme-light');\n  } else {\n    setTheme('theme-dark');\n  }\n});\n\n// ===============================================================\n\nconst scrollToTopBtn = document.querySelector('.scroll-up');\n\nwindow.addEventListener('scroll', () => {\n  if (window.scrollY > 120) {\n    scrollToTopBtn.classList.add('show');\n  } else {\n    scrollToTopBtn.classList.remove('show');\n  }\n});\n\nscrollToTopBtn.addEventListener('click', () => {\n  window.scrollTo({\n    top: 0,\n    behavior: 'smooth',\n  });\n});\n\n// ===============================================================\n"],"names":["Swiper","refs","handleHeaderLinkClick","handleHomeClick","handleShoppingClick","activeElement","renderTop","data","booksPerRow","el","catName","books","renderOneBook","renderCategories","a","b","renderCategory","categoryName","_id","book_image","title","author","BASEURL","fetchGeneral","fetchUrl","response","axios","error","fetchCategories","fetchCategory","params","fetchBookById","id","endpoint","booksContainer","catsContainer","displayTop","addingLoader","windowWidth","booksPerRowFunc","renderedTop","wrapLastWord","displayCategories","renderedCats","displayCategory","renderedCat","textContent","lastWord","updatedContent","windowWith","booksCount","windowWidthStart","ctrlBreikpoint","changeTopDisplay","target","scrollToElement","pagesContainer","getVisiblePagesNumber","visiblePageNumber","options","checkIsThereElementOnPage","Pagination","saveBookToLocalStorage","bookId","bookData","shoppingList","popup","booksList","onBookLinkClick","event","popupBookWrapper","markup","template","openModal","backdrop","closeBtn","showModal","checkLocalStorage","clickOnAddToShopingListBtn","onBackdropClick","onEscClick","onClickCloseBtn","onSpaceButtonClick","hideModal","obj","buy_links","description","amazon","appleBook","addToShoppingListBtn","element","templateForBtn","addToShoppingListBtnHandler","toggleBtn","setTheme","themeName","scrollToTopBtn"],"mappings":"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"}